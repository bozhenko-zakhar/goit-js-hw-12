{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function getImagesByQuery(query, page) {\n\tconst response = await axios.get(query, {\n\t\tparams: {\n\t\t\tpage\n\t\t}\n\t});\n\n\treturn response.data;\n}","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function showLoader() {\n\tconst loader = document.querySelector(\".loader\");\n\n\tloader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n\tconst loader = document.querySelector(\".loader\");\n\n\tloader.style.display = \"none\";\n}\n\nexport function createGallery(images) {\n\tconst gallery = document.querySelector(\".gallery\");\n\n\tconst galleryImages = images.map(image => {\n\t\treturn (`\n\t\t\t<li class=\"gallery-item\">\n\t\t\t\t<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"gallery-image\"\n\t\t\t\t\t\tsrc=\"${image.webformatURL}\"\n\t\t\t\t\t\talt=\"${image.tags}\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t\t<ul class=\"image-desc\">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Likes</p>\n\t\t\t\t\t\t\t<p>${image.likes}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Views</p>\n\t\t\t\t\t\t\t<p>${image.views}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Comments</p>\n\t\t\t\t\t\t\t<p>${image.comments}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Downloads</p>\n\t\t\t\t\t\t\t<p>${image.downloads}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t</li>\n\t\t`)\n\t}).join(\"\");\n\n\tgallery.insertAdjacentHTML(\"beforeend\", galleryImages);\n\t\n\tlet lightboxGallery = new SimpleLightbox('.gallery a', {\n\t\tcaptionsData: \"alt\",\n\t\tcaptionDelay: 250\n\t});\n\n\tlightboxGallery.refresh();\n}\n\nexport function clearGallery() {\n\tconst gallery = document.querySelector(\".gallery\");\n\tgallery.innerHTML = \"\";\n}\n\nexport function showLoadMoreButton() {\n\tconst loadMoreButton = document.querySelector(\"#load-more\");\n\tloadMoreButton.style.display = \"block\";\n}\n\nexport function hideLoadMoreButton() {\n\tconst loadMoreButton = document.querySelector(\"#load-more\");\n\tloadMoreButton.style.display = \"none\";\n}","import getImagesByQuery from \"./js/pixabay-api.js\"\nimport { showLoader, hideLoader, createGallery, clearGallery, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions.js\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst input = form.elements[\"search-text\"];\nconst loadMoreButton = document.querySelector(\"#load-more\");\n\nlet page = 1;\nlet limit = 15;\nlet totalPages;\nlet axiosGetQuery;\n\nform.addEventListener(\"submit\", async e => {\n\te.preventDefault();\n\n\tclearGallery();\n\thideLoadMoreButton();\n\tpage = 0;\n\n\tif (!input.value.trim()) {\n\t\tiziToast.warning({\n\t\t\t\tmessage: \"Your entering data must be correct\",\n\t\t\t\tposition: \"topRight\"\n\t\t\t});\n\n\t\treturn;\n\t}\n\n\tconst axiosGetQueryParams = new URLSearchParams({\n\t\tkey: \"53631669-5f3764d338a9b02a712e297a2\",\n\t\tq: input.value,\n\t\timage_type: \"photo\",\n\t\torientation: \"horizontal\",\n\t\tsafesearch: true,\n\t\tper_page: 15\n\t});\n\n\taxiosGetQuery = `https://pixabay.com/api?${axiosGetQueryParams}`;\n\n\tpage++;\n\n\tshowLoader();\n\n\tconst data = await getImagesByQuery(axiosGetQuery, page);\n\thandleDataPromise(data);\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n\tpage++;\n\n\thideLoadMoreButton();\n\tshowLoader();\n\n\tconst data = await getImagesByQuery(axiosGetQuery, page);\n\thandleDataPromise(data);\n\n\tconst image = document.querySelector(\".gallery-item\");\n\n\twindow.scrollBy({\n\t\ttop: image.getBoundingClientRect(\"top\").height * 2,\n\t\tbehavior: \"smooth\",\n\t})\n});\n\nfunction handleDataPromise(data) {\n\ttry {\n\t\thideLoader();\n\t\t\n\t\tconst hits = data.hits;\n\t\tconst totalHits = data.totalHits;\n\t\ttotalPages = Math.ceil(totalHits / limit);\n\t\t\n\t\tif (!hits.length) {\n\t\t\tthrow new Error();\n\t\t}\n\n\t\tcreateGallery(hits);\n\n\t\tif (page >= totalPages) {\n\t\t\tiziToast.info({\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t\tposition: \"topRight\"\n\t\t\t});\n\t\t\thideLoadMoreButton();\n\t\t\treturn\n\t\t}\n\t\t\n\t\tshowLoadMoreButton();\n\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\tposition: \"topRight\"\n\t\t});\n\t}\n}"],"names":["getImagesByQuery","query","page","axios","showLoader","loader","hideLoader","createGallery","images","gallery","galleryImages","image","SimpleLightbox","clearGallery","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","form","input","limit","totalPages","axiosGetQuery","e","iziToast","data","handleDataPromise","hits","totalHits"],"mappings":"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"}