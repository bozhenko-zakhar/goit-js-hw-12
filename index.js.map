{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function getImagesByQuery(query, page) {\n\tconst response = await axios.get(\"https://pixabay.com/api\", {\n\t\tparams: {\n\t\t\tkey: query.key,\n\t\t\tq: query.q,\n\t\t\timage_type: query.image_type,\n\t\t\torientation: query.orientation,\n\t\t\tsafesearch: query.safesearch,\n\t\t\tper_page: query.per_page,\n\t\t\tpage: page\n\t\t}\n\t});\n\n\treturn response.data;\n}","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightboxGallery = new SimpleLightbox('.gallery a', {\n\tcaptionsData: \"alt\",\n\tcaptionDelay: 250\n});\n\nexport function showLoader() {\n\tconst loader = document.querySelector(\".loader\");\n\n\tloader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n\tconst loader = document.querySelector(\".loader\");\n\n\tloader.style.display = \"none\";\n}\n\nexport function createGallery(images) {\n\tconst gallery = document.querySelector(\".gallery\");\n\n\tconst galleryImages = images.map(image => {\n\t\treturn (`\n\t\t\t<li class=\"gallery-item\">\n\t\t\t\t<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"gallery-image\"\n\t\t\t\t\t\tsrc=\"${image.webformatURL}\"\n\t\t\t\t\t\talt=\"${image.tags}\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t\t<ul class=\"image-desc\">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Likes</p>\n\t\t\t\t\t\t\t<p>${image.likes}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Views</p>\n\t\t\t\t\t\t\t<p>${image.views}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Comments</p>\n\t\t\t\t\t\t\t<p>${image.comments}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<p>Downloads</p>\n\t\t\t\t\t\t\t<p>${image.downloads}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t</li>\n\t\t`)\n\t}).join(\"\");\n\n\tgallery.insertAdjacentHTML(\"beforeend\", galleryImages);\n\n\tlightboxGallery.refresh();\n}\n\nexport function clearGallery() {\n\tconst gallery = document.querySelector(\".gallery\");\n\tgallery.innerHTML = \"\";\n}\n\nexport function showLoadMoreButton() {\n\tconst loadMoreButton = document.querySelector(\"#load-more\");\n\tloadMoreButton.style.display = \"block\";\n}\n\nexport function hideLoadMoreButton() {\n\tconst loadMoreButton = document.querySelector(\"#load-more\");\n\tloadMoreButton.style.display = \"none\";\n}","import getImagesByQuery from \"./js/pixabay-api.js\"\nimport { showLoader, hideLoader, createGallery, clearGallery, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions.js\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst input = form.elements[\"search-text\"];\nconst loadMoreButton = document.querySelector(\"#load-more\");\n\nlet page;\nlet limit = 15;\nlet totalPages;\n\nform.addEventListener(\"submit\", async e => {\n\te.preventDefault();\n\n\tif (!input.value.trim()) {\n\t\tiziToast.warning({\n\t\t\t\tmessage: \"Your entering data must be correct\",\n\t\t\t\tposition: \"topRight\"\n\t\t\t});\n\n\t\treturn\n\t}\n\n\tclearGallery();\n\tpage = 1;\n\tloadImages();\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n\tpage++;\n\tawait loadImages();\n\n\tconst galleryImage = document.querySelector(\".gallery-item\");\n\tconst imageHeight = galleryImage.getBoundingClientRect().height;\n\t\n\twindow.scrollBy({\n\t\ttop: imageHeight * 2,\n\t\tbehavior: \"smooth\",\n\t});\n})\n\nfunction handleDataPromise(data) {\n\tconst hits = data.hits;\n\tconst totalHits = data.totalHits;\n\ttotalPages = Math.ceil(totalHits / limit);\n\n\tif (!hits.length) {\n\t\tiziToast.error({\n\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\tposition: \"topRight\"\n\t\t});\n\t\treturn\n\t}\n\n\tcreateGallery(hits);\n\n\tif (page >= totalPages) {\n\t\tiziToast.info({\n\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\tposition: \"topRight\"\n\t\t});\n\t\treturn\n\t}\n\n\tshowLoadMoreButton();\n}\n\nasync function loadImages() {\n\thideLoadMoreButton();\n\tshowLoader();\n\n\ttry {\n\t\tconst data = await getImagesByQuery({\n\t\t\tkey: \"53631669-5f3764d338a9b02a712e297a2\",\n\t\t\tq: input.value,\n\t\t\timage_type: \"photo\",\n\t\t\torientation: \"horizontal\",\n\t\t\tsafesearch: true,\n\t\t\tper_page: 15\n\t\t}, page);\n\t\t\n\t\thandleDataPromise(data);\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\tmessage: error.message,\n\t\t\tposition: \"topRight\"\n\t\t});\n\t} finally {\n\t\thideLoader();\n\t}\n}"],"names":["getImagesByQuery","query","page","axios","lightboxGallery","SimpleLightbox","showLoader","loader","hideLoader","createGallery","images","gallery","galleryImages","image","clearGallery","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","form","input","limit","totalPages","iziToast","loadImages","imageHeight","handleDataPromise","data","hits","totalHits","error"],"mappings":"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"}